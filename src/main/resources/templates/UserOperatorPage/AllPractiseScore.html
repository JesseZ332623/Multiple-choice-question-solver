<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <title>练习结果查询</title>
    <link rel="stylesheet" th:href="@{/CSS/UserOperatorPageCSS/AllPractiseScore.css}">
    <script type="text/javascript"
            th:src="@{/JS/UserOperatorPageScript/AllPractiseScore.js}">
    </script>
</head>

<body>
    <div id="user_name" class="user-badge">
        <img th:src="@{'/api/user_info/user_overview_avatar/' + ${UserName}}" alt="头像">
        <span th:text="${UserName}" id="user_name_text"></span>
    </div>
    
    <div>
        <p th:text="'练习次数: ' + ${#lists.size(AllScoreRecord)}"></p>
        <span id="record_amount"
              style="display: none;"
              th:text="${AllScoreRecord.size()}"></span>
    </div>
    
    <div>
        <button id="clean_record" type="button" onclick="truncateRecord(this)">
            清空练习记录
        </button>
        <table>
            <caption>练习记录</caption>
            <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">用户</th>
                    <th scope="col">练习提交时间</th>
                    <th scope="col">错误数</th>
                    <th scope="col">正确数</th>
                    <th scope="col">未答数</th>
                    <th scope="col">错误率</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="record,iter : ${AllScoreRecord}" style="--i: ${iter.index}">
                    <td th:text="${record.scoreId}"></td>
                    <td th:text="${record.userName}"></td>
                    <td th:text="${record.submitDate.toString()}"
                        th:id="'submit_date_' + ${iter.index}"></td>
                    <td th:text="${record.errorCount}"></td>
                    <td th:text="${record.correctCount}"></td>
                    <td th:text="${record.noAnswerCount}"></td>
                    <td th:text="${record.mistakeRate} + '%'"
                        th:id="'mistake_rate_' + ${iter.index}"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div id="mistake_rate_chatrs" 
         style="width: 100%; height: 500px"></div>
</body>

<script type="text/javascript"
        th:src="@{/JS/Echarts/echarts.js}"></script>
<script type="text/javascript"
        th:src="@{/JS/Echarts/MistakeRateChartsRender.js}"></script>
</html>